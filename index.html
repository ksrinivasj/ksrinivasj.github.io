<!DOCTYPE html>

<html lang="en">

<head>

  <title>Bootstrap Example</title>

  <meta charset="utf-8"> 

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <script>

    var options = {

  enableHighAccuracy: true,

  timeout: 5000,

  maximumAge: 0

};



     

function success(pos) {

  var crd = pos.coords;

   if(crd.accuracy<1000)
   {
     alert('Not able to locate accurately, try again in 1 minute');
     return false;
   }

  //document.getElementById('lat').value=`${crd.latitude}`;

  //document.getElementById('lng').value=`${crd.longitude}`;

  //document.getElementById('accuracy').value=`${crd.accuracy}`;

  

  var tempa="sms:+919177062990?body=";

  var tempi="sms:+919177062990&body=";

  var body1=document.getElementById('ATMID').value+"~"+document.getElementById('PFID').value+"~"+document.getElementById('BRCD').value+"~"+`${crd.lattitude}~${crd.longitude}~${crd.accuracy}~`;

  

  document.getElementById('linka').href=tempa+body1;

  document.getElementById('linka').style='display:block';

  

  document.getElementById('linki').href=tempi+body1;

  document.getElementById('linki').style='display:block';

  

  document.getElementById('bt').style='display:none' ; 

   

  

  console.log('Your current position is:');

  console.log(`Latitude : ${crd.latitude}`); 

  console.log(`Longitude: ${crd.longitude}`);

  console.log(`More or less ${crd.accuracy} meters.`);

}



function error(error) {

  console.warn(`ERROR(${error.code}): ${error.message}`);

  switch(error.code) {

        case error.PERMISSION_DENIED:

            alert("Geolocation not enabled! Please ensure GPS is on, and that you provide permission.");

            break;

        case error.POSITION_UNAVAILABLE:

            alert("Location information is unavailable, please use chrome/safari; not third party browsers.")

            break;

        case error.TIMEOUT:

            alert("The request to get user location timed out.")

            break;

        case error.UNKNOWN_ERROR:

            alert(x.innerHTML = "An unknown error occurred.")

            break;

    }

}



  </script>

</head>

<body>

  

  <div class="container">

  <h3>Welcome to ATM Locator! </h3>

    <p>1. Enter ATMID, PFID & Branch Code</p>

    <p>2. Click on get location & give needed permissions.</p>

    <p>3. Click on submit; to send your location to designated number via SMS. </p> 

  

  



    <!--  Lattitude: <input type='text' id='lat'  disabled></input><br/>

  Longitude: <input type='text' id='lng'  disabled></input><br/>

  Accuracy : <input type='text' id='accuracy'  disabled></input><br/>/-->

    

    <form>

    <br>

    <div class="input-group">

      <span class="input-group-addon">ATMID#</span>

      <input id="ATMID"  type="text" class="form-control" name="msg" placeholder="ATM ID">

    </div>

    

    <div class="input-group">

      <span class="input-group-addon">PF ID#&nbsp&nbsp</span> 

      <input id="PFID" type="text" class="form-control"  name="msg" placeholder="PFID">

    </div>

    

    <div class="input-group">

      <span class="input-group-addon">BR CD#</span>

      <input id="BRCD" type="text" class="form-control" name="msg" placeholder="BRCD">

    </div>

  </form>

  <br>

     

    <h2>

  <button id='bt' onclick='navigator.geolocation.getCurrentPosition(success, error, options);'>

    Get Location!

  </button>

<br/><br/>

<a id='linka' href="" style="display: none;">Submit[Android]</a>

&nbsp&nbsp

<a id='linki' href="" style="display: none;">Submit[iPhone]</a>

    <br/>

    </h2>

</center>



</body>
